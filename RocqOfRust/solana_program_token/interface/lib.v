(* Generated by rocq-of-rust *)
Require Import RocqOfRust.RocqOfRust.

(*
pub fn check_program_account(spl_token_program_id: &Pubkey) -> ProgramResult {
    if spl_token_program_id != &id() {
        return Err(ProgramError::IncorrectProgramId);
    }
    Ok(())
}
*)
Definition check_program_account (ε : list Value.t) (τ : list Ty.t) (α : list Value.t) : M :=
  match ε, τ, α with
  | [], [], [ spl_token_program_id ] =>
    ltac:(M.monadic
      (let spl_token_program_id :=
        M.alloc (|
          Ty.apply (Ty.path "&") [] [ Ty.path "solana_address::Address" ],
          spl_token_program_id
        |) in
      M.catch_return
        (Ty.apply
          (Ty.path "core::result::Result")
          []
          [ Ty.tuple []; Ty.path "solana_program_error::ProgramError" ]) (|
        ltac:(M.monadic
          (M.read (|
            let~ _ : Ty.tuple [] :=
              M.match_operator (|
                Ty.tuple [],
                M.alloc (| Ty.tuple [], Value.Tuple [] |),
                [
                  fun γ =>
                    ltac:(M.monadic
                      (let γ :=
                        M.use
                          (M.alloc (|
                            Ty.path "bool",
                            M.call_closure (|
                              Ty.path "bool",
                              M.get_trait_method (|
                                "core::cmp::PartialEq",
                                Ty.apply (Ty.path "&") [] [ Ty.path "solana_address::Address" ],
                                [],
                                [ Ty.apply (Ty.path "&") [] [ Ty.path "solana_address::Address" ] ],
                                "ne",
                                [],
                                []
                              |),
                              [
                                M.borrow (| Pointer.Kind.Ref, spl_token_program_id |);
                                M.borrow (|
                                  Pointer.Kind.Ref,
                                  M.alloc (|
                                    Ty.apply (Ty.path "&") [] [ Ty.path "solana_address::Address" ],
                                    M.borrow (|
                                      Pointer.Kind.Ref,
                                      M.alloc (|
                                        Ty.path "solana_address::Address",
                                        M.call_closure (|
                                          Ty.path "solana_address::Address",
                                          M.get_function (| "spl_token_interface::id", [], [] |),
                                          []
                                        |)
                                      |)
                                    |)
                                  |)
                                |)
                              ]
                            |)
                          |)) in
                      let _ := is_constant_or_break_match (| M.read (| γ |), Value.Bool true |) in
                      M.never_to_any (|
                        M.read (|
                          M.return_ (|
                            Value.StructTuple
                              "core::result::Result::Err"
                              []
                              [ Ty.tuple []; Ty.path "solana_program_error::ProgramError" ]
                              [
                                Value.StructTuple
                                  "solana_program_error::ProgramError::IncorrectProgramId"
                                  []
                                  []
                                  []
                              ]
                          |)
                        |)
                      |)));
                  fun γ => ltac:(M.monadic (Value.Tuple []))
                ]
              |) in
            M.alloc (|
              Ty.apply
                (Ty.path "core::result::Result")
                []
                [ Ty.tuple []; Ty.path "solana_program_error::ProgramError" ],
              Value.StructTuple
                "core::result::Result::Ok"
                []
                [ Ty.tuple []; Ty.path "solana_program_error::ProgramError" ]
                [ Value.Tuple [] ]
            |)
          |)))
      |)))
  | _, _, _ => M.impossible "wrong number of arguments"
  end.

Global Instance Instance_IsFunction_check_program_account :
  M.IsFunction.C "spl_token_interface::check_program_account" check_program_account.
Admitted.
Global Typeclasses Opaque check_program_account.
